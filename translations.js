// Language translations
const translations = {
    en: {
        // Navigation
        "about": "About",
        "activity": "Activity",
        "signIn": "Sign In",
        
        // Timer section
        "pomodoroTimer": "Pomodoro Timer",
        "start": "Start",
        "pause": "Pause",
        "reset": "Reset",
        
        // Tasks section
        "tasksList": "Tasks List",
        "addTask": "Add Task",
        "editTask": "Edit Task",
        "deleteTask": "Delete Task",
        
        // About section
        "aboutTitle": "About the Pomodoro Technique",
        "whyTitle": "Why Pomodoro Technique?",
        "whyText": "The Pomodoro Technique is a time management method that improves productivity, focus, and mental agility and efficiency. It was developed by Francesco Cirillo in the late 1980s and has been proven to be simple, short, finite chunks (typically 25 minutes) to complete larger tasks.",
        "howTitle": "How to use the Pomodoro Technique",
        "howText": "1. Choose a task you want to complete.\n2. Set the timer for 25 minutes and begin work on the task.\n3. When the timer rings, take a short 5-minute break.\n4. Repeat this process four times, then take a longer 15-30 minute break.",
        "benefitsTitle": "Benefits of Pomodoro",
        "benefitsText": "• Increased Focus: Helps eliminate distractions by asking clear time limits.\n• Prevents Burnout: Regular breaks keep your mind fresh and reduce fatigue.\n• Enhances Productivity: Encourages deep work by focusing on one task at a time.\n• Tracks Progress: Pomodoro allows you to measure how much time you spent on tasks.\n• Mindful Prioritization: The structured workflow prevents you from delaying important tasks.",
        
        // Modal
        "addNewTask": "Add New Task",
        "enterTask": "Enter task...",
        "cancel": "Cancel",
        "add": "Add Task",
        
        // Activity modal
        "yourActivity": "Your Pomodoro Activity",
        "totalPomodoros": "Total Pomodoros",
        "completedTasks": "Completed Tasks",
        "totalTime": "Total Time",
        
        // Sign in modal
        "createAccount": "Create account",
        "signUpGoogle": "Sign up with Google",
        "orSignUp": "or sign up with email",
        "email": "Email",
        "enterEmail": "Enter your email address",
        "signUp": "Sign up",
        "alreadyAccount": "Already have an account?",
        "login": "Login",

        "deleteTitle": "Delete Task",
        "deleteConfirmation": "Are you sure you want to delete this task?",
        "delete": "Delete",
    },
    
    es: {
        // Navigation
        "about": "Acerca de",
        "activity": "Actividad",
        "signIn": "Iniciar Sesión",
        
        // Timer section
        "pomodoroTimer": "Temporizador Pomodoro",
        "start": "Iniciar",
        "pause": "Pausar",
        "reset": "Reiniciar",
        
        // Tasks section
        "tasksList": "Lista de Tareas",
        "addTask": "Añadir Tarea",
        "editTask": "Editar Tarea",
        "deleteTask": "Eliminar Tarea",
        
        // About section
        "aboutTitle": "Acerca de la Técnica Pomodoro",
        "whyTitle": "¿Por qué la Técnica Pomodoro?",
        "whyText": "La Técnica Pomodoro es un método de gestión del tiempo que mejora la productividad, la concentración y la agilidad mental. Fue desarrollada por Francesco Cirillo a finales de los años 80 y ha demostrado ser simple, con bloques cortos y finitos (normalmente de 25 minutos) para completar tareas mayores.",
        "howTitle": "Cómo usar la Técnica Pomodoro",
        "howText": "1. Elige una tarea que quieras completar.\n2. Configura el temporizador para 25 minutos y comienza a trabajar en la tarea.\n3. Cuando suene el temporizador, toma un descanso corto de 5 minutos.\n4. Repite este proceso cuatro veces, luego toma un descanso más largo de 15-30 minutos.",
        "benefitsTitle": "Beneficios de Pomodoro",
        "benefitsText": "• Mayor Concentración: Ayuda a eliminar distracciones con límites de tiempo claros.\n• Previene el Agotamiento: Los descansos regulares mantienen tu mente fresca y reducen la fatiga.\n• Mejora la Productividad: Fomenta el trabajo profundo centrándote en una tarea a la vez.\n• Seguimiento del Progreso: Pomodoro te permite medir cuánto tiempo has dedicado a las tareas.\n• Priorización Consciente: El flujo de trabajo estructurado te impide retrasar tareas importantes.",
        
        // Modal
        "addNewTask": "Añadir Nueva Tarea",
        "enterTask": "Ingresa la tarea...",
        "cancel": "Cancelar",
        "add": "Añadir Tarea",
        
        // Activity modal
        "yourActivity": "Tu Actividad Pomodoro",
        "totalPomodoros": "Total Pomodoros",
        "completedTasks": "Tareas Completadas",
        "totalTime": "Tiempo Total",
        
        // Sign in modal
        "createAccount": "Crear cuenta",
        "signUpGoogle": "Registrarse con Google",
        "orSignUp": "o registrarse con email",
        "email": "Correo electrónico",
        "enterEmail": "Ingresa tu dirección de correo",
        "signUp": "Registrarse",
        "alreadyAccount": "¿Ya tienes una cuenta?",
        "login": "Ingresar",

        "deleteTitle": "Eliminar Tarea",
        "deleteConfirmation": "¿Estás seguro de que quieres eliminar esta tarea?",
        "delete": "Eliminar"
    },
    
    jp: {
        // Navigation
        "about": "概要",
        "activity": "アクティビティ",
        "signIn": "サインイン",
        
        // Timer section
        "pomodoroTimer": "ポモドーロタイマー",
        "start": "開始",
        "pause": "一時停止",
        "reset": "リセット",
        
        // Tasks section
        "tasksList": "タスクリスト",
        "addTask": "タスク追加",
        "editTask": "タスク編集",
        "deleteTask": "タスク削除",
        
        // About section
        "aboutTitle": "ポモドーロテクニックについて",
        "whyTitle": "なぜポモドーロテクニック？",
        "whyText": "ポモドーロテクニックは、生産性、集中力、精神的敏捷性を向上させる時間管理法です。1980年代後半にフランチェスコ・シリロによって開発され、大きなタスクを完了するために単純で短い有限のチャンク（通常25分）であることが証明されています。",
        "howTitle": "ポモドーロテクニックの使い方",
        "howText": "1. 完了したいタスクを選びます。\n2. タイマーを25分に設定し、タスクの作業を開始します。\n3. タイマーが鳴ったら、5分間の短い休憩を取ります。\n4. このプロセスを4回繰り返し、その後15〜30分の長い休憩を取ります。",
        "benefitsTitle": "ポモドーロの利点",
        "benefitsText": "• 集中力向上：明確な時間制限を設けることで気が散るのを防ぎます。\n• 燃え尽き症候群を防止：定期的な休憩で頭をリフレッシュし、疲労を軽減します。\n• 生産性向上：一度に一つのタスクに集中することを奨励します。\n• 進捗状況の追跡：ポモドーロではタスクにかかった時間を測定できます。\n• 意識的な優先順位付け：構造化されたワークフローにより、重要なタスクを先延ばしにするのを防ぎます。",
        
        // Modal
        "addNewTask": "新しいタスクを追加",
        "enterTask": "タスクを入力...",
        "cancel": "キャンセル",
        "add": "タスクを追加",
        
        // Activity modal
        "yourActivity": "あなたのポモドーロアクティビティ",
        "totalPomodoros": "合計ポモドーロ",
        "completedTasks": "完了したタスク",
        "totalTime": "合計時間",

        // Sign in modal
        "createAccount": "アカウント作成",
        "signUpGoogle": "Googleでサインアップ",
        "orSignUp": "またはメールでサインアップ",
        "email": "メールアドレス",
        "enterEmail": "メールアドレスを入力",
        "signUp": "サインアップ",
        "alreadyAccount": "すでにアカウントをお持ちですか？",
        "login": "ログイン",

        "deleteTitle": "タスク削除",
        "deleteConfirmation": "このタスクを削除してもよろしいですか？",
        "delete": "削除",
    },
    
    cn: {
        // Navigation
        "about": "关于",
        "activity": "活动",
        "signIn": "登录",
        
        // Timer section
        "pomodoroTimer": "番茄钟计时器",
        "start": "开始",
        "pause": "暂停",
        "reset": "重置",
        
        // Tasks section
        "tasksList": "任务列表",
        "addTask": "添加任务",
        "editTask": "编辑任务",
        "deleteTask": "删除任务",
        
        // About section
        "aboutTitle": "关于番茄工作法",
        "whyTitle": "为什么选择番茄工作法？",
        "whyText": "番茄工作法是一种提高生产力、专注力和思维敏捷度的时间管理方法。它由弗朗西斯科·西里洛在20世纪80年代末开发，已被证明是完成大型任务的简单、短暂、有限的时间块（通常为25分钟）。",
        "howTitle": "如何使用番茄工作法",
        "howText": "1. 选择一个你想要完成的任务。\n2. 将计时器设置为25分钟并开始工作。\n3. 当计时器响起时，休息5分钟。\n4. 重复这个过程四次，然后休息15-30分钟。",
        "benefitsTitle": "番茄工作法的好处",
        "benefitsText": "• 提高专注力：通过设定明确的时间限制帮助消除干扰。\n• 防止疲劳：定期休息保持头脑清醒并减少疲劳。\n• 提高生产力：鼓励一次专注于一项任务的深度工作。\n• 跟踪进度：番茄工作法让你能够测量花在任务上的时间。\n• 有意识的优先排序：结构化的工作流程防止你推迟重要任务。",
        
        // Modal
        "addNewTask": "添加新任务",
        "enterTask": "输入任务...",
        "cancel": "取消",
        "add": "添加任务",
        
        // Activity modal
        "yourActivity": "你的番茄活动",
        "totalPomodoros": "总番茄数",
        "completedTasks": "已完成任务",
        "totalTime": "总时间",
        
        // Sign in modal
        "createAccount": "创建账户",
        "signUpGoogle": "使用谷歌注册",
        "orSignUp": "或使用电子邮件注册",
        "email": "电子邮件",
        "enterEmail": "输入您的电子邮件地址",
        "signUp": "注册",
        "alreadyAccount": "已有账户？",
        "login": "登录",

        "deleteTitle": "删除任务",
        "deleteConfirmation": "确定要删除此任务吗？",
        "delete": "删除",


    },
    
    ph: {
        // Navigation
        "about": "Tungkol",
        "activity": "Aktibidad",
        "signIn": "Mag-sign In",
        
        // Timer section
        "pomodoroTimer": "Pomodoro Timer",
        "start": "Start",
        "pause": "Pause",
        "reset": "Reset",
        
        // Tasks section
        "tasksList": "Lista ng mga Gawain",
        "addTask": "Magdagdag ng Gawain",
        "editTask": "I-edit ang Gawain",
        "deleteTask": "Burahin ang Gawain",
        
        // About section
        "aboutTitle": "Tungkol sa Pomodoro Technique",
        "whyTitle": "Bakit Pomodoro Technique?",
        "whyText": "Ang Pomodoro Technique ay isang paraan ng pamamahala ng oras na nagpapabuti ng produktibidad, pokus, at mental na kakayahan. Ito ay binuo ni Francesco Cirillo noong huling bahagi ng 1980s at napatunayan na simple, maikling panahon (kadalasan 25 minuto) upang makumpleto ang malalaking gawain.",
        "howTitle": "Paano gamitin ang Pomodoro Technique",
        "howText": "1. Pumili ng gawain na nais mong tapusin.\n2. I-set ang timer ng 25 minuto at simulan ang trabaho.\n3. Kapag tumunog ang timer, magpahinga ng 5 minuto.\n4. Ulitin ang prosesong ito ng apat na beses, at pagkatapos ay magpahinga ng 15-30 minuto.",
        "benefitsTitle": "Mga Benepisyo ng Pomodoro",
        "benefitsText": "• Nadagdagang Pokus: Tumutulong na alisin ang mga distraksiyon sa pamamagitan ng paghingi ng malinaw na limitasyon ng oras.\n• Iniiwasan ang Pagkapagod: Regular na pahinga upang mapanatiling sariwa ang isip at mabawasan ang pagkapagod.\n• Pinahuhusay ang Produktibidad: Hinihikayat ang malalim na trabaho sa pamamagitan ng pagtuon sa isang gawain sa isang pagkakataon.\n• Sinusubaybayan ang Progreso: Pinapayagan ng Pomodoro na sukatin kung gaano katagal ang ginugol mo sa mga gawain.\n• Mindful na Pag-uuna: Ang istrukturadong workflow ay pinipigilan kang ipagpaliban ang mahahalagang gawain.",
        
        // Modal
        "addNewTask": "Magdagdag ng Bagong Gawain",
        "enterTask": "Ilagay ang gawain...",
        "cancel": "Kanselahin",
        "add": "Idagdag ang Gawain",
        
        // Activity modal
        "yourActivity": "Iyong Pomodoro Activity",
        "totalPomodoros": "Kabuuang Pomodoro",
        "completedTasks": "Nakumpletong Gawain",
        "totalTime": "Kabuuang Oras",
        
        // Sign in modal
        "createAccount": "Gumawa ng account",
        "signUpGoogle": "Mag-sign up gamit ang Google",
        "orSignUp": "o mag-sign up gamit ang email",
        "email": "Email",
        "enterEmail": "Ilagay ang iyong email address",
        "signUp": "Mag-sign up",
        "alreadyAccount": "Mayroon ka na bang account?",
        "login": "Mag-login",

        "deleteTitle": "Burahin ang Gawain",
        "deleteConfirmation": "Sigurado ka bang gusto mong burahin ang gawaing ito?",
        "delete": "Burahin"
    },

};

// Get the current language from localStorage or default to English
let currentLanguage = localStorage.getItem('language') || 'en';
const deleteModal = document.getElementById('delete-modal');
const deleteTitle = document.getElementById('delete-title');
const deleteMessage = document.getElementById('delete-message');
const deleteCancelBtn = document.getElementById('delete-cancel');
const deleteConfirmBtn = document.getElementById('delete-confirm');
let taskToDelete = null;

// Function to update all text elements on the page
function updateLanguage(lang) {
    // Save the language preference to localStorage
    localStorage.setItem('language', lang);
    currentLanguage = lang;
    
    // Update navigation links
    document.querySelector('.nav-links a[href="#about-section"]').textContent = translations[lang].about;
    document.querySelector('.nav-links a[href="#"]').textContent = translations[lang].activity;
    document.querySelector('.nav-links a:last-child').textContent = translations[lang].signIn;
    
    // Update timer section
    document.querySelector('.timer-title').textContent = translations[lang].pomodoroTimer;
    document.getElementById('start-btn').textContent = translations[lang].start;
    document.getElementById('pause-btn').textContent = translations[lang].pause;
    document.getElementById('reset-btn').textContent = translations[lang].reset;
    
    // Update tasks section
    document.querySelector('.tasks-title').textContent = translations[lang].tasksList;
    document.querySelector('.add-task-btn').innerHTML = 
        `<span class="add-icon">+</span>${translations[lang].addTask}`;
    
    // Update about section
    document.querySelector('.about-title').textContent = translations[lang].aboutTitle;
    document.querySelector('.about-card:nth-child(1) .about-card-title').textContent = translations[lang].whyTitle;
    document.querySelector('.about-card:nth-child(1) .about-card-text').textContent = translations[lang].whyText;
    document.querySelector('.about-card:nth-child(2) .about-card-title').textContent = translations[lang].howTitle;
    document.querySelector('.about-card:nth-child(2) .about-card-text').innerHTML = translations[lang].howText.replace(/\n/g, '<br>');
    document.querySelector('.about-card:nth-child(3) .about-card-title').textContent = translations[lang].benefitsTitle;
    document.querySelector('.about-card:nth-child(3) .about-card-text').innerHTML = translations[lang].benefitsText.replace(/\n/g, '<br>');
    
    // Update task modal
    document.getElementById('modal-title').textContent = translations[lang].addNewTask;
    document.getElementById('task-input').placeholder = translations[lang].enterTask;
    document.getElementById('modal-cancel').textContent = translations[lang].cancel;
    document.getElementById('modal-confirm').textContent = translations[lang].add;
    
    // Update activity modal
    document.querySelector('.activity-header .modal-title').textContent = translations[lang].yourActivity;
    document.querySelectorAll('.stat-label')[0].textContent = translations[lang].totalPomodoros;
    document.querySelectorAll('.stat-label')[1].textContent = translations[lang].completedTasks;
    document.querySelectorAll('.stat-label')[2].textContent = translations[lang].totalTime;
    document.querySelector('.chart-title').textContent = translations[lang].weeklyActivity;

    deleteTitle.textContent = translations[lang].deleteTitle;
    deleteMessage.textContent = translations[lang].deleteConfirmation;
    deleteCancelBtn.textContent = translations[lang].cancel;
    deleteConfirmBtn.textContent = translations[lang].delete;

    // Update chart days
    const days = [
        translations[lang].mon, 
        translations[lang].tue, 
        translations[lang].wed, 
        translations[lang].thu, 
        translations[lang].fri, 
        translations[lang].sat, 
        translations[lang].sun
    ];
    document.querySelectorAll('.chart-day').forEach((day, index) => {
        day.textContent = days[index];
    });
    
    // Update sign in modal
    document.querySelector('.signin-title').textContent = translations[lang].createAccount;
    document.querySelector('.signin-google-btn span').textContent = translations[lang].signUpGoogle;
    document.querySelector('.divider-text').textContent = translations[lang].orSignUp;
    document.querySelector('.signin-label').textContent = translations[lang].email;
    document.getElementById('email').placeholder = translations[lang].enterEmail;
    document.querySelector('.signin-submit-btn').textContent = translations[lang].signUp;
    document.querySelector('.signin-login-prompt').innerHTML = 
        `${translations[lang].alreadyAccount} <a href="#" class="login-link">${translations[lang].login}</a>`;
    
    // Update context menu items if they exist
    const contextMenuItems = document.querySelectorAll('.context-menu-item');
    if (contextMenuItems.length >= 2) {
        contextMenuItems[0].textContent = translations[lang].editTask;
        contextMenuItems[1].textContent = translations[lang].deleteTask;
    }
}

// Initialize the page with the saved language
document.addEventListener('DOMContentLoaded', () => {
    // Apply the saved language or default
    updateLanguage(currentLanguage);
    
    // Update the language selector display
    const languageOptions = document.querySelectorAll('.language-option');
    languageOptions.forEach(option => {
        const lang = option.getAttribute('data-lang');
        if (lang === currentLanguage) {
            const flagImg = option.querySelector('.language-flag');
            document.getElementById('selected-flag').src = flagImg.src;
            document.querySelector('.language-display span').textContent = lang.toUpperCase();
        }
    });
});

// Export functions
window.updateLanguage = updateLanguage;

